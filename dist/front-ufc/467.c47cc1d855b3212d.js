"use strict";(self.webpackChunkFrontUFC=self.webpackChunkFrontUFC||[]).push([[467],{3467:(W,Z,n)=>{n.r(Z),n.d(Z,{FighterModule:()=>X});var h=n(6895),f=n(9299),x=n(7579),u=n(2722),N=n(1698),g=n(5412),c=n(4006),t=n(4650);const d_iutApiBaseUrl="https://api-ufc.vercel.app";var T=n(529);let p=(()=>{class i{constructor(e){this.http=e}get(){return this.http.get(d_iutApiBaseUrl+"/fighters")}delete(e){return this.http.delete(d_iutApiBaseUrl+"/fighters/"+e)}update(e){return this.http.put(d_iutApiBaseUrl+"/fighters/"+e.id,e)}create(e){return this.http.post(d_iutApiBaseUrl+"/fighters",e)}getById(e){return this.http.get(d_iutApiBaseUrl+"/fighters/"+e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(T.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var b=n(7009);let C=(()=>{class i{constructor(e){this.http=e}get(){return this.http.get(d_iutApiBaseUrl+"/categories")}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(T.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var F=n(4859),v=n(9549),y=n(9602),A=n(4385),B=n(3238),U=n(4144);function D(i,r){if(1&i&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}let O=(()=>{class i{constructor(e,o,a,s,m,_,K){this.dialogRef=e,this.data=o,this.fb=a,this.fighterService=s,this._snackBar=m,this.categoryService=_,this.router=K,this.destroy$=new x.x,this.fighterForm=this.fb.group({id:[0,[c.kI.required]],firstName:["",[c.kI.required]],lastName:["",[c.kI.required]],category:[0,[c.kI.required]],dateOfBirth:["",[c.kI.required]]}),o.isCreateForm||this.setfighterForm(o.fighter)}ngOnInit(){this.categoriesSubscription=this.categoryService.get().subscribe(e=>{this.categories=e})}ngOnDestroy(){this.categoriesSubscription.unsubscribe(),this.destroy$.next(!0),this.destroy$.complete()}setfighterForm(e){this.fighterForm.setValue({id:e.id,firstName:e.firstName,lastName:e.lastName,category:e.category.id,dateOfBirth:e.dateOfBirth})}get title(){return this.data.isCreateForm?"Formulaire de cr\xe9ation":"Formulaire de modification"}get submitBtnName(){return this.data.isCreateForm?"Ajouter":"Modifier"}onSubmit(){this.fighterForm.valid&&(this.fighterForm.value.dateOfBirth=new Date(this.fighterForm.value.dateOfBirth).toISOString(),this.data.isCreateForm?(this.fighterForm.value.id=Date.now()+Math.random(),this.fighterService.create(this.fighterForm.value).pipe((0,u.R)(this.destroy$)).subscribe(e=>{this._snackBar.open(e,"",{duration:2e3,panelClass:["bg-success"]}),this.dialogRef.close(!0),this.router.navigate(["/fighters"])})):this.fighterService.update(this.fighterForm.value).pipe((0,u.R)(this.destroy$)).subscribe(e=>{this._snackBar.open(e,"",{duration:2e3,panelClass:["bg-success"]}),this.dialogRef.close(!0),this.router.navigate(["/fighters"])}))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.so),t.Y36(g.WI),t.Y36(c.qu),t.Y36(p),t.Y36(b.ux),t.Y36(C),t.Y36(f.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-fighter-form"]],decls:33,vars:7,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],[1,"form"],["appearance","outline",2,"display","none"],["matInput","","formControlName","id","readonly",""],["appearance","outline"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","formControlName","dateOfBirth",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["align","end"],["mat-button","","type","button","mat-dialog-close",""],["mat-raised-button","","type","submit","cdkFocusInitial","","color","warn",3,"disabled"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"identifiant"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"Pr\xe9nom"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"mat-form-field",5)(13,"mat-label"),t._uU(14,"Nom"),t.qZA(),t._UZ(15,"input",7),t.qZA(),t.TgZ(16,"mat-form-field",5)(17,"mat-label"),t._uU(18,"Cat\xe9gorie"),t.qZA(),t.TgZ(19,"mat-select",8),t.YNc(20,D,2,2,"mat-option",9),t.qZA()(),t.TgZ(21,"mat-form-field",10)(22,"mat-label"),t._uU(23,"Date de naissance"),t.qZA(),t._UZ(24,"input",11)(25,"mat-datepicker-toggle",12)(26,"mat-datepicker",null,13),t.qZA()(),t.TgZ(28,"mat-dialog-actions",14)(29,"button",15),t._uU(30,"Annuler"),t.qZA(),t.TgZ(31,"button",16),t._uU(32),t.qZA()()()),2&e){const a=t.MAs(27);t.xp6(1),t.Oqu(o.title),t.xp6(1),t.Q6J("formGroup",o.fighterForm),t.xp6(18),t.Q6J("ngForOf",o.categories),t.xp6(4),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(6),t.Q6J("disabled",!o.fighterForm.valid||!o.fighterForm.dirty),t.xp6(1),t.Oqu(o.submitBtnName)}},dependencies:[h.sg,F.lW,g.ZT,g.uh,g.H8,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,v.KE,v.hX,v.R9,y.Mq,y.hl,y.nW,A.gD,B.ey,U.Nt],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-top:30px;width:35%}"]}),i})();var S=n(7392),l=n(7155);function Y(i,r){1&i&&(t.TgZ(0,"th",15),t._uU(1," Pr\xe9nom "),t.qZA())}function k(i,r){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.firstName," ")}}function M(i,r){1&i&&(t.TgZ(0,"th",15),t._uU(1," Nom "),t.qZA())}function L(i,r){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.lastName," ")}}function I(i,r){1&i&&(t.TgZ(0,"th",15),t._uU(1," Cat\xe9gorie "),t.qZA())}function w(i,r){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.category.name," ")}}function J(i,r){1&i&&t._UZ(0,"th",15)}function $(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",17),t.NdJ("click",function(a){const m=t.CHM(e).$implicit;return t.oxw().openFighterForm(m),t.KtG(a.stopPropagation())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function R(i,r){1&i&&t._UZ(0,"th",15)}function q(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",17),t.NdJ("click",function(a){const m=t.CHM(e).$implicit;return t.oxw().delete(m.id),t.KtG(a.stopPropagation())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function P(i,r){1&i&&t._UZ(0,"tr",18)}function Q(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr",19),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.showfighterDetails(s.id))}),t.qZA()}}let j=(()=>{class i{constructor(e,o,a,s,m){this.fighterService=e,this.categoryService=o,this.dialog=a,this._snackBar=s,this.router=m,this.destroy$=new x.x,this.displayedColumns=["firstName","lastName","category","update","delete"],this.fighters$=this.fighterService.get(),this.categories=this.categoryService.get()}openFighterForm(e){this.dialog.open(O,{height:"85%",width:"60%",data:{isCreateForm:!e,fighter:e||void 0}}).afterClosed().pipe((0,u.R)(this.destroy$)).subscribe(a=>{a&&(this.fetchData(),this.router.navigate(["/fighters"]))})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}ngOnInit(){this.fetchData()}fetchData(){this.fighters$=this.fighterService.get()}delete(e){this.dialog.open(N._,{data:{title:"Confirmation de suppression",message:"\xeates-vous s\xfbr de vouloir supprimer ce combattant ?",typeMessage:"none",yesButtonVisible:!0,noButtonVisible:!0,cancelButtonVisible:!1,defaultButton:"No",yesButtonLabel:"Oui",noButtonLabel:"Non"}}).afterClosed().pipe((0,u.R)(this.destroy$)).subscribe(a=>{a&&this.fighterService.delete(e).pipe((0,u.R)(this.destroy$)).subscribe(s=>{this._snackBar.open(s,"",{duration:2e3,panelClass:["bg-success"]}),this.fetchData(),this.router.navigate(["/fighters"])})})}showfighterDetails(e){this.router.navigate(["/fighters/"+e])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p),t.Y36(C),t.Y36(g.uw),t.Y36(b.ux),t.Y36(f.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-fighter-list"]],decls:25,vars:5,consts:[[1,"container"],[1,"flex-grow-1","p-1"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","firstName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["matColumnDef","category"],["matColumnDef","update"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"btn-holder"],["mat-fab","","color","warn",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"table",2),t.ALo(3,"async"),t.ynx(4,3),t.YNc(5,Y,2,0,"th",4),t.YNc(6,k,2,1,"td",5),t.BQk(),t.ynx(7,6),t.YNc(8,M,2,0,"th",4),t.YNc(9,L,2,1,"td",5),t.BQk(),t.ynx(10,7),t.YNc(11,I,2,0,"th",4),t.YNc(12,w,2,1,"td",5),t.BQk(),t.ynx(13,8),t.YNc(14,J,1,0,"th",4),t.YNc(15,$,3,0,"td",9),t.BQk(),t.ynx(16,10),t.YNc(17,R,1,0,"th",4),t.YNc(18,q,3,0,"td",9),t.BQk(),t.YNc(19,P,1,0,"tr",11),t.YNc(20,Q,1,0,"tr",12),t.qZA()(),t.TgZ(21,"div",13)(22,"button",14),t.NdJ("click",function(){return o.openFighterForm()}),t.TgZ(23,"mat-icon"),t._uU(24,"add"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("dataSource",t.lcZ(3,3,o.fighters$)),t.xp6(17),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[S.Hw,F.cs,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,h.Ov],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:100%}.container[_ngcontent-%COMP%]   .btn-holder[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;padding:1%}"]}),i})();function E(i,r){if(1&i&&(t.TgZ(0,"div",1)(1,"div",2),t._uU(2),t.qZA(),t.TgZ(3,"div")(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div")(7,"p"),t._uU(8),t.qZA()()()),2&i){const e=t.oxw();t.xp6(2),t.AsE(" ",e.selectedfighter.firstName," ",e.selectedfighter.lastName," "),t.xp6(3),t.hij("Cat\xe9gorie: ",e.selectedfighter.category.name,""),t.xp6(3),t.hij("Date de naissance: ",e.selectedfighter.dateOfBirth,"")}}let z=(()=>{class i{constructor(){this.received=new t.vpe}ngOnInit(){this.received.emit(!0)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-fighter-card"]],inputs:{selectedfighter:"selectedfighter"},outputs:{received:"received"},decls:1,vars:1,consts:[["class","selected-fighter",4,"ngIf"],[1,"selected-fighter"],[1,"name"]],template:function(e,o){1&e&&t.YNc(0,E,9,4,"div",0),2&e&&t.Q6J("ngIf",o.selectedfighter)},dependencies:[h.O5],styles:[".selected-fighter[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:10px;width:50%;margin:auto}.name[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:20px}.selected-fighter[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:20px}.selected-fighter[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]}),i})();const G=[{path:"",component:j},{path:":id",component:(()=>{class i{constructor(e,o,a){this.route=e,this.fighterService=o,this.location=a,e.params.subscribe(s=>{this.fighterId=s.id})}ngOnInit(){this.fighterId&&(this.fighter$=this.fighterService.getById(this.fighterId))}goBack(){this.location.back()}showReceivedValue(e){console.log(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.gz),t.Y36(p),t.Y36(h.Ye))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-fighter-details"]],decls:4,vars:3,consts:[["mat-raised-button","",3,"click"],[3,"selectedfighter","received"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.goBack()}),t._uU(1," Retour "),t.qZA(),t.TgZ(2,"app-fighter-card",1),t.NdJ("received",function(s){return o.showReceivedValue(s)}),t.ALo(3,"async"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("selectedfighter",t.lcZ(3,1,o.fighter$)))},dependencies:[F.lW,z,h.Ov]}),i})()}];let H=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.Bz.forChild(G),f.Bz]}),i})();var V=n(4466);let X=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[p,C],imports:[h.ez,H,V.m]}),i})()}}]);